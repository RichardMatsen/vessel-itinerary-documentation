(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{207:function(t,a,s){t.exports=s.p+"assets/img/dts-package.e2cd511d.png"},208:function(t,a,s){t.exports=s.p+"assets/img/applying-actions.1a137814.png"},218:function(t,a,s){"use strict";s.r(a);var e=s(0),n=Object(e.a)({},function(){var t=this,a=t.$createElement,e=t._self._c||a;return e("div",{staticClass:"content"},[t._m(0),t._v(" "),t._m(1),t._v(" "),e("p",[t._v("The project was developed in a VMWare WorkStation virtual machine, to allow easy hand-off to the client and to the support staff. This VM contained itâ€™s own copy of Oracle 9i as the source database and SQL Server 2000 as the target database.")]),t._v(" "),e("p",[t._v("It included all source material and unit tests which were performed against the actual databases in the VM. Since the MAPS database is quite large, the connections could be pointed at an external copy of the production data by changing the connection strings (implemented by UDL files).")]),t._v(" "),e("p",[t._v("The project consists of")]),t._v(" "),t._m(2),t._v(" "),t._m(3),t._v(" "),e("p",[t._v("DTS graphically shows the application flow which allows support staff to quickly understand the steps occurring within the application.")]),t._v(" "),e("br"),t._v(" "),e("figure",[e("img",{directives:[{name:"img",rawName:"v-img"}],attrs:{src:s(207),alt:"dts-package"}}),t._v(" "),t._m(4)]),t._v(" "),e("p",[t._v("The DTS package handles transport layer steps, i.e selecting which records in the source system are new since the last process run, and filtering out records not required.")]),t._v(" "),e("p",[t._v("Data is transferred into staging tables on the target server which are a mirror image of the source tables. This ensures minimal stress during the transfer and validation can occur in the subsequent step, which is run entirely on the target server.")]),t._v(" "),t._m(5),t._v(" "),e("p",[t._v("All of the the business logic occurs in the TSQL components, which makes it")]),t._v(" "),t._m(6),t._v(" "),e("p",[t._v("The code is a hierarchy of stored procedures and SQL views which validates the incoming records and produces lists of data to be actioned, and lists of data errors.")]),t._v(" "),e("p",[t._v("Validation includes checking to see if an incoming record might overwrite data that has been edited in the target system, thus protecting any changes made by users.")]),t._v(" "),e("p",[t._v("Transformations are performed to handle data in various stages of update, for example the arrival date is calculated by the following expression in a SQL view:")]),t._v(" "),t._m(7),e("p",[t._v("After validation, the SQL code establishes actions to be taken (Insert, Update, Delete) by comparing the incoming data to existing data. Each Action has two parts, a view which provides the data records and a stored procedure to implement the action.")]),t._v(" "),t._m(8),t._v(" "),e("p",[t._v("The actions are applied by a C# Updater program which does not contain any business logic, it simply looks for SQL views and stored procs following a naming convention.")]),t._v(" "),e("br"),t._v(" "),e("figure",[e("img",{directives:[{name:"img",rawName:"v-img"}],attrs:{src:s(208),alt:"applying-actions"}}),t._v(" "),t._m(9)]),t._v(" "),e("br"),t._v(" "),t._m(10),t._v(" "),e("MiniMap")],1)},[function(){var t=this.$createElement,a=this._self._c||t;return a("h1",{attrs:{id:"project-structure"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#project-structure","aria-hidden":"true"}},[this._v("#")]),this._v(" Project Structure")])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"environment"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#environment","aria-hidden":"true"}},[this._v("#")]),this._v(" Environment")])},function(){var t=this.$createElement,a=this._self._c||t;return a("ul",[a("li",[this._v("A DTS package as the application framework")]),this._v(" "),a("li",[this._v("Business logic in Transact SQL scripts")]),this._v(" "),a("li",[this._v("A generic loader application in C# to provide the final loading and logging support.")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"the-dts-package"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#the-dts-package","aria-hidden":"true"}},[this._v("#")]),this._v(" The DTS package")])},function(){var t=this.$createElement,a=this._self._c||t;return a("figcaption",[a("i",[this._v("(click to enlarge)")])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"transact-sql-components"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#transact-sql-components","aria-hidden":"true"}},[this._v("#")]),this._v(" Transact SQL Components")])},function(){var t=this.$createElement,a=this._self._c||t;return a("ul",[a("li",[this._v("accessible to support staff")]),this._v(" "),a("li",[this._v("can be visually validated by executing views")]),this._v(" "),a("li",[this._v("easily testable against real data")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"language-sql extra-class"},[s("pre",{pre:!0,attrs:{class:"language-sql"}},[s("code",[t._v("Arrival "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("COALESCE")]),s("span",{attrs:{class:"token punctuation"}},[t._v("(")]),t._v("vd"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ActualArrival"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" vd"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ScheduledArrival"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" vd"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ActualPilotOnBoard"),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n                   vd"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ScheduledPilotOnBoard"),s("span",{attrs:{class:"token punctuation"}},[t._v(")")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n\nArrivalStatus "),s("span",{attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("CASE")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("WHEN")]),t._v(" vd"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ActualArrival         "),s("span",{attrs:{class:"token operator"}},[t._v("IS")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("THEN")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'Actual'")]),t._v("\n                     "),s("span",{attrs:{class:"token keyword"}},[t._v("WHEN")]),t._v(" vd"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ScheduledArrival      "),s("span",{attrs:{class:"token operator"}},[t._v("IS")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("THEN")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'Scheduled'")]),t._v("\n                     "),s("span",{attrs:{class:"token keyword"}},[t._v("WHEN")]),t._v(" vd"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ActualPilotOnBoard    "),s("span",{attrs:{class:"token operator"}},[t._v("IS")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("THEN")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'ActPilot'")]),t._v("\n                     "),s("span",{attrs:{class:"token keyword"}},[t._v("WHEN")]),t._v(" vd"),s("span",{attrs:{class:"token punctuation"}},[t._v(".")]),t._v("ScheduledPilotOnBoard "),s("span",{attrs:{class:"token operator"}},[t._v("IS")]),t._v(" "),s("span",{attrs:{class:"token operator"}},[t._v("NOT")]),t._v(" "),s("span",{attrs:{class:"token boolean"}},[t._v("NULL")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("THEN")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'SchedPilot'")]),t._v("\n                     "),s("span",{attrs:{class:"token keyword"}},[t._v("ELSE")]),t._v(" "),s("span",{attrs:{class:"token string"}},[t._v("'<No Date>'")]),t._v(" "),s("span",{attrs:{class:"token keyword"}},[t._v("END")]),s("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n")])])])},function(){var t=this.$createElement,a=this._self._c||t;return a("h2",{attrs:{id:"applying-actions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#applying-actions","aria-hidden":"true"}},[this._v("#")]),this._v(" Applying Actions")])},function(){var t=this.$createElement,a=this._self._c||t;return a("figcaption",[a("i",[this._v("(click to enlarge)")])])},function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("ul",[s("li",[s("p",[s("strong",[t._v("Known Error Views")]),s("br"),t._v("\nThese select incoming records with a particular error condition")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("bvx_VoyageDetail_Errors")]),s("br"),t._v("\nThis view collates the errors and is a source for the error report")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("bxv_VoyageDetail_Valid")]),s("br"),t._v("\nSelects all incoming records which are not in the errors view")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("Data Views")]),s("br"),t._v("\nSplits the valid records by action type")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("Apply Action Commands")]),s("br"),t._v("\nUses the data views to apply changes to target tables")])]),t._v(" "),s("li",[s("p",[s("strong",[t._v("Warning Views")]),s("br"),t._v("\nAs per error views, but non-blocking (note this also checks for existing roster postings which have been invalidated by a vessel itinerary change)")])])])}],!1,null,null,null);n.options.__file="structure.md";a.default=n.exports}}]);